<!DOCTYPE html>
<html class="no-js">
  <head>
	<meta charset="utf-8">
	<title>การติดตั้ง และการใช้งาน composer กับ Yii 2 | Yii 2 Learning</title>
	<meta name="description" content="การติดตั้ง และการใช้งาน composer กับ Yii 2 |  Yii2, Yii Framework, Extension, Howto,tutorial">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-Frame-Options" content="sameorigin">

	<!-- CSS -->
	<link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" href="/css/jekyll-github.css">

	<!--Favicon-->
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

	<!-- Canonical -->
	<link rel="canonical" href="http://dixonsatit.github.io/2015/06/29/using-extensions.html">

	<!-- RSS -->
	<link rel="alternate" type="application/atom+xml" title="Yii 2 Learning" href="http://dixonsatit.github.io/feed.xml" />

	<!-- Font Awesome -->
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- Google Fonts -->
	
	<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css">
	

	<!-- KaTeX -->
	
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.css">
	<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.js"></script>
	

	<!-- Google Analytics -->
	
	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-63817549-1', 'auto');
	ga('send', 'pageview');
	</script>
	
</head>

  <body>
    <header class="site-header">
	<div class="branding">
		
		<a href="/">
			<img class="avatar" src="https://secure.gravatar.com/avatar/7037e0cdf96cd3d4ad39b6c32ca29bd7?s=100" alt=""/>
		</a>
		
		<h1 class="site-title">
			<a href="/">Yii 2 Learning</a>
		</h1>
	</div>
	<nav class="site-nav">
		<ul>
			
			
			
			
			<li>
				<a class="page-link" href="/about/">
					About
				</a>
			</li>
			
			
			
			
			
			
			
			
			
			<li>
				<a class="page-link" href="/yii2-learning/">
					Table Of Contents
				</a>
			</li>
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			<!-- Social icons from Font Awesome, if enabled -->
			


<li>
	<a href="mailto:dixonsatit@gmail.com" title="Email">
		<i class="fa fa-fw fa-envelope"></i>
	</a>
</li>









<li>
	<a href="https://www.facebook.com/yii2Learning" title="Follow on Facebook">
		<i class="fa fa-fw fa-facebook"></i>
	</a>
</li>





<li>
	<a href="https://github.com/dixonsatit" title="Follow on GitHub">
		<i class="fa fa-fw fa-github"></i>
	</a>
</li>





















<li>
	<a href="https://twitter.com/dixonsatit" title="Follow on Twitter">
		<i class="fa fa-fw fa-twitter"></i>
	</a>
</li>






		</ul>
	</nav>
</header>

    <div class="content">
      <article >
  <header style="background-image: url('/')">
    <h1 class="title">การติดตั้ง และการใช้งาน composer กับ Yii 2</h1>
    <p class="meta">
    June 29, 2015
    
    </p>
  </header>
  <section class="post-content"><p><img src="/img/composer.jpg" alt=""></p>

<p>ในการพัฒนาระบบโดยใช้ php นั้น แต่ก่อนจะไม่มีระบบจัดการแพ็จเกจมาให้ เราจะต้องเข้าไปดาวน์โหลดที่เว็บไซต์ของ library เองจากนั้นทำการแตกซิบไฟล์แล้ว include เข้ามาใช้งาน วันดีคืนดี หาก library มีการอัพเดท ก็ต้องตามไปโหลด library มาแล้วนำไฟล์มาทับของเก่า ซึ่งก็เป็นเรื่องที่น่าเบื่อมากๆ  ยิ่งถ้าเราใช้ library เยอะๆ นี่ตามไปโหลดแทบไม่ไหว</p>

<p>php จึงมองเห็นความลำบากนี้ (จริงๆ ภาษาอื่นๆ เค้ามีกันไปนานแล้วววว เอาเถอะยังไงมาช้าก็ดีกว่าไม่มา  )
จึงมีระบบจัดการแพ็ตเกจของ php ขึ้นชื่อว่า <code>composer</code> ซึ่งเป็นมาตรฐานกลาง ทำให้เราสามารถจัดการแพ็คเกจต่างๆ ได้ที่เดียว ไม่ต้องตามไปดาวน์โหลดจากเว็บไซต์ของ library ต่างๆ</p>

<h2 id="การติดตั้ง-composer">การติดตั้ง Composer</h2>

<p>สามารถทำได้ง่ายๆ ติดตั้งได้ทั้ง Windows,Linux,Mac ตัว composer เป็นแค่ไฟล์ php เล็กๆ ไฟล์นึงเท่านั้น เอาไว้จัดการ เพ็คเกจต่างๆ</p>

<h3 id="windows">Windows</h3>

<p>สามารถโหลดตัว exe มาติดตั้งได้เลย <a href="https://getcomposer.org/doc/00-intro.md#installation-windows">ดาวน์โหลดตัวติดตั้ง</a> จากนั้นจะได้ <code>Composer-Setup.exe</code> ทำการคลิกและติดตั้งเองได้เลย</p>

<blockquote>
<p>หากมี error เกี่ยวกับ <code>http</code> ให้ทำการเปิด extension <code>php_openssl.dll</code> ใน php.ini และหากติดตั้งแล้วยังไม่ได้ ให้ลองติดตั้งซ้ำใหม่อีกรอบ ส่วนใหญ่จะเจอแค่ xp</p>
</blockquote>

<h3 id="linux-amp-mac">Linux &amp; Mac</h3>

<p>ติดตั้งผ่านคำ curl จากนั้นรันคำสั่ง mv เพื่อเปลี่ยนชื่อไฟล์ เป็น composer และย้ายไปไว้ที่ bin</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">curl -sS https://getcomposer.org/installer | php
mv composer.phar /usr/local/bin/composer
</code></pre></div>
<h2 id="เรียกใช้งาน">เรียกใช้งาน</h2>

<p>เปิด command หรือ terminal  ขึ้นมาแล้ว รันคำสั่ง <code>composer</code> จะพบกับหน้าจอ composer แบบนี้ แสดงว่าพร้อมใช้งานแล้ว</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">______
/ ____/___  ____ ___  ____  ____  ________  _____
/ /   / __ \/ __ `__ \/ __ \/ __ \/ ___/ _ \/ ___/
/ /___/ /_/ / / / / / / /_/ / /_/ (__  )  __/ /
\____/\____/_/ /_/ /_/ .___/\____/____/\___/_/
                  /_/
Composer version 1.0-dev (4f80e7ff68466cab970c22b425725b8058c32970) 2015-06-09 00:03:48

Usage:
command [options] [arguments]

Options:
--help (-h)           Display this help message
--quiet (-q)          Do not output any message
--verbose (-v|vv|vvv) Increase the verbosity of messages: 1 for normal output, 2 for more verbose output and 3 for debug
--version (-V)        Display this application version
--ansi                Force ANSI output
--no-ansi             Disable ANSI output
--no-interaction (-n) Do not ask any interactive question
--profile             Display timing and memory usage information
--working-dir (-d)    If specified, use the given directory as working directory.

Available commands:
about            Short information about Composer
archive          Create an archive of this composer package
browse           Opens the package&#39;s repository URL or homepage in your browser.
clear-cache      Clears composer&#39;s internal package cache.
clearcache       Clears composer&#39;s internal package cache.
config           Set config options
create-project   Create new project from a package into given directory.
depends          Shows which packages depend on the given package
diagnose         Diagnoses the system to identify common errors.
dump-autoload    Dumps the autoloader
dumpautoload     Dumps the autoloader
global           Allows running commands in the global composer dir ($COMPOSER_HOME).
help             Displays help for a command
home             Opens the package&#39;s repository URL or homepage in your browser.
info             Show information about packages
init             Creates a basic composer.json file in current directory.
install          Installs the project dependencies from the composer.lock file if present, or falls back on the composer.json.
licenses         Show information about licenses of dependencies
list             Lists commands
remove           Removes a package from the require or require-dev
require          Adds required packages to your composer.json and installs them
run-script       Run the scripts defined in composer.json.
search           Search for packages
self-update      Updates composer.phar to the latest version.
selfupdate       Updates composer.phar to the latest version.
show             Show information about packages
status           Show a list of locally modified packages
update           Updates your dependencies to the latest version according to composer.json, and updates the composer.lock file.
validate         Validates a composer.json
</code></pre></div>
<blockquote>
<p>เราสามารถสั่งให้มันอัพเดทตัวเองได้  โดยใช้คำสั่ง <code>composer self-update</code> และคำสังอื่นๆ สามารถดูได้ที่เวลาเราพิมพ์คำสั่ง composer เข้าไปเฉยๆ แล้วดูตรง <code>Available commands</code> เหมือนด้านบน</p>
</blockquote>

<p>ใน project Yii ที่เราได้สร้างขึ้น จะมีไฟล์ชื่อว่า composer.json เป็นตัวจัดการ packages ทั้งหมดและสามารถบอกได้ว่า Applicaion  ของเราได้ติดตั้ง extension อะไรไปบ้าง หากมีการติดตั้ง extension เพิ่มเติมมันจะทำการแก้ไขไฟล์นี้ให้อัตโนมัติ ยกเว้นว่าเราเพิ่ม extension เองในไฟล์นี้</p>

<h3 id="การติดตั้ง-extension">การติดตั้ง extension</h3>

<p>การติดตั้ง extension ผ่าน composer นั้นทำได้ 2 วิธีคือ</p>

<p><strong>ติดตั้งผ่านคำสั่ง <code>composer require</code></strong></p>

<p>วิธีนี้สามารถติดตั้งได้ทีละ 1 extension ตัวอย่างการติดตั้ง</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">composer require --prefer-dist yiisoft/yii2-imagine
</code></pre></div>
<p>หลังจากติดตั้งเสร็จ composer จะแก้ไขไฟล์ composer.json ให้เราเอง โดยเพิ่ม ชื่อ extension ที่ tag require ที่เราได้ติดตั้งเข้าไป</p>

<p><strong>ติดตั้งโดยเข้าไปแก้ไขไฟล์ composer.json</strong></p>

<p>สามารถเข้าไปแก้ไขไฟล์โดยตรงในส่วนของ <code>require</code> สามารถติดตั้งได้ทีละหลายๆ ตัว ตัวอย่างนี้เพิ่มเข้าไป 2 extension คือ <code>yii2-chartjs-widget</code>,<code>yii2-imagine</code></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&quot;require&quot;: {
      &quot;php&quot;: &quot;&gt;=5.4.0&quot;,
      &quot;yiisoft/yii2&quot;: &quot;&gt;=2.0.4&quot;,
      &quot;yiisoft/yii2-bootstrap&quot;: &quot;*&quot;,
      &quot;yiisoft/yii2-swiftmailer&quot;: &quot;*&quot;,
      &quot;2amigos/yii2-chartjs-widget&quot;: &quot;~2.0&quot;,
      &quot;yiisoft/yii2-imagine&quot;: &quot;*&quot;
  },
</code></pre></div>
<p>หลังจากเพิ่ม extension ที่ต้องการจะติดตั้งเสร็จ ให้ทำการรันคำสั่ง <code>composer update</code> composer จะทำการตรวจสอบและ install extension ให้เรา</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">composer update
</code></pre></div>
<p>หลังจากนั้น extension ที่เราติดตั้งจะถูกโหลดไปเก็บไว้ที่ <code>vendor</code> เพื่อรอให้เราเรียกใช้งานผ่าน namespace ได้</p>

<h2 id="ปัญหาที่เจอในการติดตั้ง">ปัญหาที่เจอในการติดตั้ง</h2>

<p><strong>ปัญหาถาม username  &amp; password account Github</strong></p>

<p>ให้ทำการสมัครสมาชิกที่ <a href="https://github.com/">Github.com</a> และยืนยันอีเมล์ให้เรียบร้อย และนำ username &amp; password มากรอกเวลาที่ composer  ถาม</p>

<p><strong>ปัญหา access tokens</strong></p>

<p>ปัญหานี้เกิดจากการที่ composer ต้องเข้าไปโหลดข้อมูลจากเว็บไซต์ github มันจึงต้องการระบุตัวตนผู้ใช้งานโดยการถามหา access tokens  ซึ่งเราสามารถสร้าง access tokens นี้ได้ง่ายๆ เพียงทำขั้นตอนดังต่อไปนี้</p>

<p><img src="/img/access-token.jpg" alt=""></p>

<ol>
<li>เข้า Github แล้วเข้าไปที่ account แล้วไปที่ settings</li>
<li>คลิกเข้าไปที่ Personal access tokens เมนูด้านขวา</li>
<li>คลิกที่ปุ่ม Generate new token</li>
<li>ระบบจะถามรหัสผ่าน ให้เรากรอกรหัสผ่านเข้าไป</li>
<li>จะพบกับหน้าจอ New Personal access token ให้ใส่คำอธิบายลงไปเล็กน้อย จากนั้นกดปุ่ม Generate token</li>
<li>จะพบกับเลข token ยาว copy และนำมาใส่ที่ composer เวลาที่มันถาม หลังจากนั้นก็จะสามารถใช้งานได้ต่อไป</li>
</ol>
</section>
</article>

<!-- Post navigation -->


<!-- Disqus -->

<div class="comments">
  <div id="disqus_thread"></div>
<script type="text/javascript">
	var disqus_shortname = 'dixonsatit';
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

</div>


    </div>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script> -->
<script src="/js/main.js"></script>


<footer class="site-footer">

	<h6 style="font-weight:normal;">เครือข่ายพันธมิตรของเรา <small></small></h6>
	<a href="http://cloud-tutorial.com" target="_blank">
		<img src="http://cloud-tutorial.com/wp-content/uploads/2015/04/new-logo-sm.png" alt="cloud-tutorial.com" />
	</a>
	<hr>
	<p class="text"><a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/th/"><img alt="สัญญาอนุญาตของครีเอทีฟคอมมอนส์" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/th/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Yii2 Learning</span> โดย <a xmlns:cc="http://creativecommons.org/ns#" href="http://www.dimpled.me" property="cc:attributionName" rel="cc:attributionURL">Sathit Seethaphon</a> บทความต่างๆ ในเว็บไซต์ อนุญาตให้นำไปเผยแพร่ได้ โดยต้องอ้างอิงที่มาและไม่ใช้เพื่อการค้า <br>ตาม<a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/th/" > สัญญาอนุญาตของครีเอทีฟคอมมอนส์แบบ แสดงที่มา-ไม่ใช้เพื่อการค้า 3.0 ประเทศไทย</a>.<br> Powered by <a href="http://jekyllrb.com">Jekyll</a> with <a href="https://rohanchandra.github.io/project/type/">Type Theme</a>
</p>
</footer>


  </body>
</html>

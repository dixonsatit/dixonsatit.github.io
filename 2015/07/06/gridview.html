<!DOCTYPE html>
<html class="no-js">
  <head>
	<meta charset="utf-8">
	<title>Tip การใช้งาน GridView และการปรับแต่ง Columns | Yii 2 Learning</title>
	<meta name="description" content="Tip การใช้งาน GridView และการปรับแต่ง Columns |  Yii2, Yii Framework, Extension, Howto,tutorial">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-Frame-Options" content="sameorigin">

	<!-- CSS -->
	<link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" href="/css/jekyll-github.css">

	<!--Favicon-->
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

	<!-- Canonical -->
	<link rel="canonical" href="http://dixonsatit.github.io/2015/07/06/gridview.html">

	<!-- RSS -->
	<link rel="alternate" type="application/atom+xml" title="Yii 2 Learning" href="http://dixonsatit.github.io/feed.xml" />

	<!-- Font Awesome -->
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- Google Fonts -->
	
	<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css">
	

	<!-- KaTeX -->
	
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.css">
	<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.js"></script>
	

	<!-- Google Analytics -->
	
	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-63817549-1', 'auto');
	ga('send', 'pageview');
	</script>
	
</head>

  <body>
    <header class="site-header">
	<div class="branding">
		
		<a href="/">
			<img class="avatar" src="https://secure.gravatar.com/avatar/7037e0cdf96cd3d4ad39b6c32ca29bd7?s=100" alt=""/>
		</a>
		
		<h1 class="site-title">
			<a href="/">Yii 2 Learning</a>
		</h1>
	</div>
	<nav class="site-nav">
		<ul>
			
			
			
			
			<li>
				<a class="page-link" href="/about/">
					About
				</a>
			</li>
			
			
			
			
			
			
			
			
			
			<li>
				<a class="page-link" href="/yii2-learning/">
					Table Of Contents
				</a>
			</li>
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			<!-- Social icons from Font Awesome, if enabled -->
			


<li>
	<a href="mailto:dixonsatit@gmail.com" title="Email">
		<i class="fa fa-fw fa-envelope"></i>
	</a>
</li>









<li>
	<a href="https://www.facebook.com/yii2Learning" title="Follow on Facebook">
		<i class="fa fa-fw fa-facebook"></i>
	</a>
</li>





<li>
	<a href="https://github.com/dixonsatit" title="Follow on GitHub">
		<i class="fa fa-fw fa-github"></i>
	</a>
</li>





















<li>
	<a href="https://twitter.com/dixonsatit" title="Follow on Twitter">
		<i class="fa fa-fw fa-twitter"></i>
	</a>
</li>






		</ul>
	</nav>
</header>

    <div class="content">
      <article >
  <header style="background-image: url('/')">
    <h1 class="title">Tip การใช้งาน GridView และการปรับแต่ง Columns</h1>
    <p class="meta">
    July 6, 2015
    
    </p>
  </header>
  <section class="post-content"><p><img src="/img/grid-view.png" alt=""></p>

<p>GridView เป็น Widget พื้นฐานที่เราน่าจะคุ้นเคยกันดี และส่วนใหญ่เวลาแสดงผล เราก็มักจะใช้ GridView เป็นหลักเพราะด้วยความที่ใช้งานง่ายและสะดวก วันนี้จะขอแนะนำการปรับแต่ง GridView เพื่อให้เราสามารถใช้งาน GridView ได้อย่างเต็มประสิทธิภาพ และส่วนที่เราใช้งานมากที่สุดนั้นก็คือ <code>columns</code></p>

<h2 id="columns">Columns</h2>

<p>Columns มีอยู่ 2 ส่วนหลักที่เราใช้งานบ่อยๆ คือ</p>

<ul>
<li><code>columns</code> เป็นส่วนที่เอาไว้กำหนดว่าเราต้องการแสดงข้อมูลคอลัมน์ใหนบ้างโดยระบุชื่อคอลัมน์เข้าไป</li>
<li><code>Shortcut Format</code> เป็นการกำหนด format ของการแสดงผลในแต่ละคอลัมน์สามารถระบบ format ต่อท้ายชื่อคอลัมน์ได้เลยโดยคั่นด้วยเครื่องหมาย <code>:</code></li>
<li><code>Anonymous functions</code> เป็นการปรับแต่งคอลัมน์ที่ยือยุ่นที่สุด สามารถใส่เงื่อนไข รับค่าตัวแปรต่างๆ ได้ กำหนดสี, ใส่ icon อืนๆ </li>
</ul>

<h3 id="การใช้งาน-column">การใช้งาน column</h3>

<p>ซึ่งในส่วนของ columns เมื่อเราต้องการที่จะแสดงข้อมูล column อะไรบ้างเราสามารถระบุชื่อ column ลงไปได้เลยเช่น ต้องการแสดงข้อมูล <code>title</code>,<code>name</code>,<code>surname</code></p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x"> </span><span class="cp">&lt;?</span><span class="o">=</span> <span class="nx">GridView</span><span class="o">::</span><span class="na">widget</span><span class="p">([</span>
      <span class="s1">&#39;dataProvider&#39;</span> <span class="o">=&gt;</span> <span class="nv">$dataProvider</span><span class="p">,</span>
      <span class="s1">&#39;filterModel&#39;</span> <span class="o">=&gt;</span> <span class="nv">$searchModel</span><span class="p">,</span>
      <span class="s1">&#39;columns&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
          <span class="s1">&#39;title&#39;</span><span class="p">,</span>
          <span class="s1">&#39;name&#39;</span><span class="p">,</span>
          <span class="s1">&#39;surname&#39;</span>
      <span class="p">],</span>
  <span class="p">]);</span> <span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>ส่วนใหญ่เราก็จะใช้กันแค่นี้..แต่จริงๆ แล้ว มันมีฟังชันก์อีก 1 ตัวที่อยากแนะนำคือ <code>Shortcut Format</code> สิ่งที่จะทำให้เรากำหนดรูปแบบการแสดงผลได้ง่ายๆ</p>

<h3 id="shortcut-format">Shortcut Format</h3>

<p>ปกติเราก็จะระบุแค่ชื่อคอลัมน์เข้าไป แต่จริงๆ GridView คุณสมบัติอีกอย่างนึง ที่มันทำให้เราปรับแต่งการแสดงผลใน column ได้ง่ายๆ นั้นคือ <code>shortcut format</code> ซึ่งรูปแบบจะเป็นดังนี้ <code>&quot;attribute:format:label&quot;</code> ปกติเราจะใส่แต่ชื่อคอลัมน์เข้าไปแต่นี่ เราสามารถกำหนดการแสดงผลได้ ว่าจะให้ออกมา format อะไร และยังกำหนด label ในตรงนี้ได้อีกด้วย แค่คั้นด้วยเครื่องหมาย <code>:</code></p>

<ul>
<li><code>attribute</code> คือชื่อคอลัมน์ที่ต้องการแสดงผล</li>
<li><code>format</code> คือข้อมูลที่เราต้องการให้แสดงผลออกมาในรูปแบบที่ต้องการ เช่น เราเก็บข้อมูลเป็นวันที่ <code>2015-06-01</code> เราสามารถกำหนด format เป็น <code>date</code> ได้โดยผลลัพจะออกมาเป็น <code>Jun 24, 2015</code> ได้ซึ่งมีหลาย format มาก เช่น <code>date</code>,<code>dateTime</code>,<code>email</code>,<code>time</code>,<code>text</code>,<code>html</code> ไปเลือกใช้งานกันเองได้<a href="http://www.yiiframework.com/doc-2.0/yii-i18n-formatter.html">ที่นี่</a></li>
<li><code>label</code> เป็นข้อความของหัวคอลัมน์ที่เราต้องการแสดงผลให้เปลี่ยนจากของเดิมที่กำหนดไว้ใน <code>attributesLabel()</code> ใน Model และตรงนี้เป็น option จะระบุหรือไม่ก็ได้</li>
</ul>

<p>ตัวอย่างการเรียกใช้งาน <code>shortcut format</code></p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x"> </span><span class="cp">&lt;?</span><span class="o">=</span> <span class="nx">GridView</span><span class="o">::</span><span class="na">widget</span><span class="p">([</span>
      <span class="s1">&#39;dataProvider&#39;</span> <span class="o">=&gt;</span> <span class="nv">$dataProvider</span><span class="p">,</span>
      <span class="s1">&#39;filterModel&#39;</span> <span class="o">=&gt;</span> <span class="nv">$searchModel</span><span class="p">,</span>
      <span class="s1">&#39;columns&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
          <span class="s1">&#39;created_at:date:วันที่สร้าง&#39;</span><span class="p">,</span> <span class="c1">// แสดงผลวันที่</span>
          <span class="s1">&#39;updated_at:dateTime&#39;</span><span class="p">,</span> <span class="c1">// แสดงผลวันที่และเวลา</span>
          <span class="s1">&#39;email:email&#39;</span><span class="p">,</span> <span class="c1">// แสดงผลเป็น link MailTo</span>
          <span class="s1">&#39;website:url&#39;</span><span class="p">,</span>  <span class="c1">// แสดงผล link url</span>
          <span class="s1">&#39;is_admin:boolean&#39;</span><span class="p">,</span> <span class="c1">// แสดงเป็น Yes,No</span>
          <span class="s1">&#39;payroll:decimal&#39;</span><span class="p">,</span> <span class="c1">// แสดงผลเป็นทศนิยม</span>
          <span class="s1">&#39;content:html&#39;</span><span class="p">,</span><span class="c1">// แสดงผลเป็น Html</span>
          <span class="s1">&#39;photo:image&#39;</span><span class="p">,</span><span class="c1">// แสดงผลเป็นรูปภาพ</span>
          <span class="s1">&#39;age:integer&#39;</span><span class="p">,</span><span class="c1">// แสดงผลเป็นจำนวนเต็ม</span>
          <span class="s1">&#39;vat:percent&#39;</span><span class="p">,</span><span class="c1">// แสดงผลเป็น %</span>
          <span class="s1">&#39;content:text&#39;</span><span class="p">,</span><span class="c1">// แสดงผลข้อความ text</span>
          <span class="s1">&#39;created_at:time&#39;</span><span class="p">,</span><span class="c1">// แสดงผลเป็นเวลา</span>
          <span class="s1">&#39;file_size:size&#39;</span><span class="p">,</span><span class="c1">// แสดงผลเป็นหน่วยของขนาดเช่น 12 kilobytes ค่าข้อมูลต้องเป็น bytes</span>
          <span class="s1">&#39;file_size:shortSize&#39;</span><span class="p">,</span><span class="c1">// แสดงผลเป็นหน่วยของขนาดเช่น 12 KB ค่าข้อมูลต้องเป็น bytes</span>
          <span class="s1">&#39;created_at:relativeTime&#39;</span><span class="c1">// แสดงผลเป็นเวลาที่ผ่านมาแล้ว</span>
      <span class="p">],</span>
  <span class="p">]);</span> <span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>จะเห็นว่าเราสามารถกำหนดแบบสั้นๆ ได้  โดยที่เราไม่ต้องระบุโค้ดแบบเต็มๆ ทำให้ลดเวลาได้มากๆ  เพราะถ้าเขียนเต็มๆ จะยาวมากๆ แบบนี้ทุกคอลัมน์</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x"> //...</span>
<span class="x"> &#39;columns&#39; =&gt; [</span>
<span class="x">   [</span>
<span class="x">        &#39;attribute&#39; =&gt; &#39;name&#39;,</span>
<span class="x">        &#39;format&#39; =&gt; &#39;text&#39;,</span>
<span class="x">        &#39;label&#39; =&gt; &#39;Name&#39;,</span>
<span class="x">    ],</span>
<span class="x">  ]</span>
</code></pre></div>
<h2 id="การปรับแต่งคอลัมน์โดยใช้-anonymous-functions">การปรับแต่งคอลัมน์โดยใช้ Anonymous functions</h2>

<p><a href="http://php.net/manual/en/functions.anonymous.php">Anonymous functions</a> เป็นความสามารถของ PHP นะครับ มีให้ใช้ตั้งแต่เวอร์ชั่น 5.3.0 แต่แนะนำ 5.4.0 นะครับเพราะน่าจะทำงานได้ดีกว่า</p>

<p>ปกติการใช้งาน GridView หากไม่ได้มีการใช้งานที่มีเงื่อนไขซับซ้อนอะไร ก็สามารถใช้ตามแบบที่แนะนำเบื้องต้นก็เพียงพอ แต่หากมีเงื่อนไขที่ซับซ้อน เราก็ยังสามารถปรับแต่งคอลัมน์ได้อีก ซึ่งการใช้งานแบบนี้ เรียกว่า  <code>anonymous function</code> ถ้าใครเคยเขียน JavaScript &amp; jQuery จะเห็นว่าคล้ายๆกัน โดยเราสามารถประการ function เข้าไปที่ property <code>value</code> แบบนี้ได้เลย <code>value=&gt;function(){}</code>  สะดวกมากๆ</p>

<p>รายละเอียด <code>anonymous function</code> จะมี parameter ให้สามารถเรียกใช้งานได้ดังนี้</p>

<ul>
<li>$model คือตัวแทนข้อมูล record นั้นๆ สามารถเรียกคอลัมน์อื่นๆ ได้</li>
<li>$key pk ของ record นั้น</li>
<li>$index ลำดับของ index</li>
<li>$column  yii\grid\DataColumn object</li>
</ul>

<blockquote>
<p>เราสามารถตั้งค่าตัวแปรพวกนี้เป็นชื่ออะไรก็ได้ เพราะมันจะยึดตามลำดับเป็นหลัก เพราะฉะนั้นเราต้องรู้เองนะครับว่า ตัวแปรที่ตั้งใหม่อยู่ที่ลำดับอะไร ชื่ออะไร</p>
</blockquote>

<p>ตัวอย่างการใช้งาน</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x"> </span><span class="cp">&lt;?</span><span class="o">=</span> <span class="nx">GridView</span><span class="o">::</span><span class="na">widget</span><span class="p">([</span>
      <span class="s1">&#39;dataProvider&#39;</span> <span class="o">=&gt;</span> <span class="nv">$dataProvider</span><span class="p">,</span>
      <span class="s1">&#39;filterModel&#39;</span> <span class="o">=&gt;</span> <span class="nv">$searchModel</span><span class="p">,</span>
      <span class="s1">&#39;columns&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="p">[</span> <span class="c1">// รวมคอลัมน์</span>
          <span class="s1">&#39;label&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;ชื่อ-นามสกุล&#39;</span><span class="p">,</span>
          <span class="s1">&#39;format&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;html&#39;</span><span class="p">,</span>
          <span class="s1">&#39;value&#39;</span><span class="o">=&gt;</span><span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$key</span><span class="p">,</span> <span class="nv">$index</span><span class="p">,</span> <span class="nv">$column</span><span class="p">){</span>
            <span class="k">return</span> <span class="nv">$model</span><span class="o">-&gt;</span><span class="na">title</span><span class="o">.</span><span class="nv">$model</span><span class="o">-&gt;</span><span class="na">firstname</span><span class="o">.</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="nv">$model</span><span class="o">-&gt;</span><span class="na">lastname</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="p">[</span> <span class="c1">// แสดงข้อมูล string</span>
          <span class="s1">&#39;attribute&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;is_admin&#39;</span><span class="p">,</span>
          <span class="s1">&#39;format&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;html&#39;</span><span class="p">,</span>
          <span class="s1">&#39;value&#39;</span><span class="o">=&gt;</span><span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$key</span><span class="p">,</span> <span class="nv">$index</span><span class="p">,</span> <span class="nv">$column</span><span class="p">){</span>
            <span class="k">return</span> <span class="nv">$model</span><span class="o">-&gt;</span><span class="na">is_admin</span><span class="o">==</span><span class="mi">1</span> <span class="o">?</span> <span class="s2">&quot;YES&quot;</span><span class="o">:</span><span class="s2">&quot;NO&quot;</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="p">[</span> <span class="c1">// แสดงข้อมูลออกเป็น icon</span>
          <span class="s1">&#39;attribute&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;is_admin&#39;</span><span class="p">,</span>
          <span class="s1">&#39;format&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;html&#39;</span><span class="p">,</span>
          <span class="s1">&#39;value&#39;</span><span class="o">=&gt;</span><span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$key</span><span class="p">,</span> <span class="nv">$index</span><span class="p">,</span> <span class="nv">$column</span><span class="p">){</span>
            <span class="k">return</span> <span class="nv">$model</span><span class="o">-&gt;</span><span class="na">is_admin</span><span class="o">==</span><span class="mi">1</span> <span class="o">?</span> <span class="s2">&quot;&lt;i class=</span><span class="se">\&quot;</span><span class="s2">glyphicon glyphicon-ok</span><span class="se">\&quot;</span><span class="s2">&gt;&lt;/i&gt;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&lt;i class=</span><span class="se">\&quot;</span><span class="s2">glyphicon glyphicon-remove</span><span class="se">\&quot;</span><span class="s2">&gt;&lt;/i&gt;&quot;</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="p">[</span> <span class="c1">// แสดงข้อมูลออกเป็นสีตามเงื่อนไข</span>
          <span class="s1">&#39;attribute&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;is_admin&#39;</span><span class="p">,</span>
          <span class="s1">&#39;format&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;html&#39;</span><span class="p">,</span>
          <span class="s1">&#39;value&#39;</span><span class="o">=&gt;</span><span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$key</span><span class="p">,</span> <span class="nv">$index</span><span class="p">,</span> <span class="nv">$column</span><span class="p">){</span>
            <span class="k">return</span> <span class="nv">$model</span><span class="o">-&gt;</span><span class="na">is_admin</span><span class="o">==</span><span class="mi">1</span> <span class="o">?</span> <span class="s2">&quot;&lt;span style=</span><span class="se">\&quot;</span><span class="s2">color:green;</span><span class="se">\&quot;</span><span class="s2">&gt;YES&lt;/span&gt;&quot;</span><span class="o">:</span><span class="s2">&quot;&lt;span style=</span><span class="se">\&quot;</span><span class="s2">color:red;</span><span class="se">\&quot;</span><span class="s2">&gt;No&lt;/span&gt;&quot;</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="c1">// ...</span>
      <span class="p">],</span>
  <span class="p">]);</span> <span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>ตัวอย่างการแสดงผล</p>

<p><img src="/img/gridview.png" alt=""></p>

<p>และเราสามารถระบุใช้งาน parameter แค่บางตัวก็ได้ ส่วนใหญ่ใช้แค่ $model ก็เพียงพอแล้ว ระบุแบบนี้ได้</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x"> </span><span class="cp">&lt;?</span><span class="o">=</span> <span class="nx">GridView</span><span class="o">::</span><span class="na">widget</span><span class="p">([</span>
      <span class="s1">&#39;dataProvider&#39;</span> <span class="o">=&gt;</span> <span class="nv">$dataProvider</span><span class="p">,</span>
      <span class="s1">&#39;filterModel&#39;</span> <span class="o">=&gt;</span> <span class="nv">$searchModel</span><span class="p">,</span>
      <span class="s1">&#39;columns&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="p">[</span>
          <span class="s1">&#39;attribute&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span>
          <span class="s1">&#39;value&#39;</span><span class="o">=&gt;</span><span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">){</span>
            <span class="k">return</span> <span class="nv">$model</span><span class="o">-&gt;</span><span class="na">title</span><span class="o">.</span><span class="nv">$model</span><span class="o">-&gt;</span><span class="na">firstname</span><span class="o">.</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="nv">$model</span><span class="o">-&gt;</span><span class="na">lastname</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">]</span>
        <span class="c1">// ...</span>
      <span class="p">],</span>
  <span class="p">]);</span> <span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<blockquote>
<p>จะสังเกตได้ว่า หาเรากำหนด <code>anonymous function</code> แบบนี้แล้ว ตัว property <code>attribute</code> จะมีหน้าที่แค่ดึงข้อมูล hedader label มาแสดงเท่านั้น หากเราไม่ต้องการ ก็สามารถระบุเข้าไปโดยตรงได้ โดยใช้ attribute <code>label</code> กำหนดค่า ข้อความที่ต้องการเข้าไปได้เลย</p>
</blockquote>

<p>และถ้าอยากกำหนด format เองแบบ <code>shortcut format</code> ก็สามารถทำได้ และสามารถใช้ได้ทุก format ที่กล่าวมา</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x"> </span><span class="cp">&lt;?</span><span class="o">=</span> <span class="nx">GridView</span><span class="o">::</span><span class="na">widget</span><span class="p">([</span>
      <span class="s1">&#39;dataProvider&#39;</span> <span class="o">=&gt;</span> <span class="nv">$dataProvider</span><span class="p">,</span>
      <span class="s1">&#39;filterModel&#39;</span> <span class="o">=&gt;</span> <span class="nv">$searchModel</span><span class="p">,</span>
      <span class="s1">&#39;columns&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="p">[</span>
          <span class="s1">&#39;attribute&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span>
          <span class="s1">&#39;value&#39;</span><span class="o">=&gt;</span><span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">){</span>
            <span class="k">return</span> <span class="nx">Yii</span><span class="o">::</span><span class="nv">$app</span><span class="o">-&gt;</span><span class="na">formatter</span><span class="o">-&gt;</span><span class="na">asDate</span><span class="p">(</span><span class="nv">$model</span><span class="o">-&gt;</span><span class="na">created_at</span><span class="p">,</span> <span class="s1">&#39;medium&#39;</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">]</span>
        <span class="c1">// ...</span>
      <span class="p">],</span>
  <span class="p">]);</span> <span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p><a href="/2015/06/23/date-formatter.html">อ่านเพิ่มเติมการใช้งาน formatter ได้ทีนี่</a></p>

<h3 id="เรียกใช้งานตัวแปรที่อยู่นอก-scoping-anonymous-function">เรียกใช้งานตัวแปรที่อยู่นอก scoping <code>anonymous function</code></h3>

<p>ปกติการใช้งาน <code>anonymous function</code> ภายใน function นี้ มันจะไม่รู้จักตัวแปรที่อยู่ด้านนอก function เลย แต่ก็มีบางกรณี ที่เราต้องการนำตัวแปรต่างๆ เข้าไปใช้ใน  <code>anonymous function</code> ซึง  <code>anonymous function</code> เองนั้น รองรับอยู่แล้ว แค่ <code>use</code> ตัวแปรที่ต้องการใช้งานเข้าไป รูปแบบ</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">function () use ($parms1,$parms2,$parms n....) {}</span>
</code></pre></div>
<p>ตัวอย่าง ผมได้ประกาศตัวแปรไว้ด้านนอก GridView และจะทำการเรียกใช้งานที่ <code>anonymous function</code> ซึ่งสามารถเรียกได้ทุกๆ column เลย จะใช้กี่ตัวก็ได้แค่ use เข้าไป</p>

<p>ตัวอย่างการใช้งาน</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="nv">$fullname</span> <span class="o">=</span> <span class="s1">&#39;Satit Seethaphon&#39;</span><span class="p">;</span>

 <span class="o">&lt;?=</span> <span class="nx">GridView</span><span class="o">::</span><span class="na">widget</span><span class="p">([</span>
      <span class="s1">&#39;dataProvider&#39;</span> <span class="o">=&gt;</span> <span class="nv">$dataProvider</span><span class="p">,</span>
      <span class="s1">&#39;filterModel&#39;</span> <span class="o">=&gt;</span> <span class="nv">$searchModel</span><span class="p">,</span>
      <span class="s1">&#39;columns&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="p">[</span>
          <span class="s1">&#39;attribute&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span>
          <span class="s1">&#39;value&#39;</span><span class="o">=&gt;</span><span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$fullname</span><span class="p">){</span>
            <span class="k">return</span> <span class="nv">$model</span><span class="o">-&gt;</span><span class="na">created_at</span> <span class="o">.</span> <span class="s2">&quot; | &quot;</span> <span class="o">.</span> <span class="nv">$fullname</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">]</span>
        <span class="c1">// ...</span>
      <span class="p">],</span>
  <span class="p">]);</span> <span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>อ่านเพิ่มเติม <a href="http://php.net/manual/en/functions.anonymous.php">functions.anonymous</a></p>

<blockquote>
<p>ขอบคุณ อ.<a href="https://www.facebook.com/tehnn?fref=ufi">@Utehn Phnu</a> ที่แนะนำมาครับ</p>
</blockquote>

<p>หวังว่าน่าจะเป็นประโยชน์และช่วยให้เราสามารถปรับแต่งได้ง่ายขึ้นนะครับ.</p>

<p><a href="http://www.yiiframework.com/doc-2.0/yii-grid-datacolumn.html#$value-detail">รายละเอียดเพิ่มเติม</a></p>
</section>
</article>

<!-- Post navigation -->


<!-- Disqus -->

<div class="comments">
  <div id="disqus_thread"></div>
<script type="text/javascript">
	var disqus_shortname = 'dixonsatit';
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

</div>


    </div>
    <script src="/js/main.js"></script>


<footer class="site-footer">
	<p class="text"><a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/th/"><img alt="สัญญาอนุญาตของครีเอทีฟคอมมอนส์" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/th/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Yii2 Learning</span> โดย <a xmlns:cc="http://creativecommons.org/ns#" href="http://www.dimpled.me" property="cc:attributionName" rel="cc:attributionURL">Satit Seethaphon</a> ผลงานนี้ ใช้ <a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/th/" > สัญญาอนุญาตของครีเอทีฟคอมมอนส์แบบ แสดงที่มา-ไม่ใช้เพื่อการค้า 3.0 ประเทศไทย</a>.<br> Powered by <a href="http://jekyllrb.com">Jekyll</a> with <a href="https://rohanchandra.github.io/project/type/">Type Theme</a>
</p>
</footer>


  </body>
</html>

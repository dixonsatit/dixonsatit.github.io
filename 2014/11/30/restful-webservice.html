<!DOCTYPE html>
<html class="no-js">
  <head>
	<meta charset="utf-8">
	<title>RESTful Web Service เบื้องต้น | Yii 2 Learning</title>
	<meta name="description" content="RESTful Web Service เบื้องต้น | ใน Yii 2 สามารถทำ RESTful ได้ง่ายๆ เลย โดยไม่ต้องติดตั้งเพิ่ม เพราะมีใน v.2 อยู่แล้ว- สามารถใช้กับ Active Record ได้เลยไม่ต้องเพิ่มเติมอะไร- ส่งออกได้ทั้ง JS... Yii2, Yii Framework, Extension, Howto,tutorial">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-Frame-Options" content="sameorigin">

	<!-- CSS -->
	<link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" href="/css/jekyll-github.css">

	<!--Favicon-->
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

	<!-- Canonical -->
	<link rel="canonical" href="http://dixonsatit.github.io/2014/11/30/restful-webservice.html">

	<!-- RSS -->
	<link rel="alternate" type="application/atom+xml" title="Yii 2 Learning" href="http://dixonsatit.github.io/feed.xml" />

	<!-- Font Awesome -->
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- Google Fonts -->
	
	<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css">
	

	<!-- KaTeX -->
	
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.css">
	<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.js"></script>
	

	<!-- Google Analytics -->
	
	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-63817549-1', 'auto');
	ga('send', 'pageview');
	</script>
	
</head>

  <body>
    <header class="site-header">
	<div class="branding">
		
		<a href="/">
			<img class="avatar" src="https://secure.gravatar.com/avatar/7037e0cdf96cd3d4ad39b6c32ca29bd7?s=100" alt=""/>
		</a>
		
		<h1 class="site-title">
			<a href="/">Yii 2 Learning</a>
		</h1>
	</div>
	<nav class="site-nav">
		<ul>
			
			
			
			
			<li>
				<a class="page-link" href="/about/">
					About
				</a>
			</li>
			
			
			
			
			
			
			
			
			
			<li>
				<a class="page-link" href="/yii2-learning/">
					Table Of Contents
				</a>
			</li>
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			<!-- Social icons from Font Awesome, if enabled -->
			


<li>
	<a href="mailto:dixonsatit@gmail.com" title="Email">
		<i class="fa fa-fw fa-envelope"></i>
	</a>
</li>









<li>
	<a href="https://www.facebook.com/yii2Learning" title="Follow on Facebook">
		<i class="fa fa-fw fa-facebook"></i>
	</a>
</li>





<li>
	<a href="https://github.com/dixonsatit" title="Follow on GitHub">
		<i class="fa fa-fw fa-github"></i>
	</a>
</li>





















<li>
	<a href="https://twitter.com/dixonsatit" title="Follow on Twitter">
		<i class="fa fa-fw fa-twitter"></i>
	</a>
</li>






		</ul>
	</nav>
</header>

    <div class="content">
      <article >
  <header style="background-image: url('/')">
    <h1 class="title">RESTful Web Service เบื้องต้น</h1>
    <p class="meta">
    November 30, 2014
    
    </p>
  </header>
  <section class="post-content"><p>ใน Yii 2 สามารถทำ RESTful ได้ง่ายๆ เลย โดยไม่ต้องติดตั้งเพิ่ม เพราะมีใน v.2 อยู่แล้ว
- สามารถใช้กับ Active Record ได้เลยไม่ต้องเพิ่มเติมอะไร
- ส่งออกได้ทั้ง JSON,XML
- รองรับมาตรฐาน <a href="http://en.wikipedia.org/wiki/HATEOAS">ATEOAS;</a> ด้วยนะ ไม่ต้องงง! เพราะผมก็งงเหมือนกัน เดี่ยวอธิบายด้านล่าง</p>

<p>ในตัวอย่างนี้ใช้ข้อมูล location พร้อมพิกัด <a href="https://raw.githubusercontent.com/bahar/WorldCityLocations/master/World_Cities_Location_table.sql">ดาวโหลดที่นี่</a> นำข้อมูลที่ได้ import เข้า mysql ครับ จากนั้นทำการ gii</p>

<p>ต้นฉบับ <a href="http://www.yiiframework.com/doc-2.0/guide-rest-quick-start.html">Guide REST Quick Start</a> ผมไม่ได้แปลนะ ผมเขียนตามความเข้าใจของผม (ถ้าจะพูดง่ายๆ ผมก็แปลไม่ออกนั่นแหละ T T&#39;)</p>

<h2 id="create-model">Create Model</h2>

<ul>
<li>นำเข้าข้อมูล location  <a href="https://raw.githubusercontent.com/bahar/WorldCityLocations/master/World_Cities_Location_table.sql">ดาวโหลดที่นี่</a></li>
<li>gii สร้าง Model ชื่อ Location</li>
</ul>

<blockquote>
<p>หากยังไม่รู้ว่า gii ทำยังไง <a href="http://www.yiiframework.com/doc-2.0/guide-start-gii.html">ดูได้ที่นี่</a></p>
</blockquote>

<h2 id="create-controller">Create Controller</h2>

<p>ทำการสร้าง <code>LocationController.php</code> ไว้ที่ <code>controllers\</code> โดยที่ตัว controller จะต้อง extends ด้วย ActiveController ซึ่งเป็น class ที่จะทำให้ LocationController เดิมๆ ของเราสามารถใช้งาน RESTful ได้ จากนั้นเราจะต้องเซ็ต overwrite property</p>

<ul>
<li><code>$modelClass</code> เพื่อบอกว่า model ที่จะใช้ชื่อว่าอะไร อยู่ที่ใหน อย่าลืม use ด้วยล่ะ ซึ่งตอนนี้เราใช้ <code>app\models\Locations</code></li>
<li><code>serializer</code>ให้ web service ส่งข้อมูล link หน้าปัจจุบัน,หน้าต่อไป,และหน้าสุดท้ายมาด้วย สะดวกมากๆ</li>
<li><code>collectionEnvelope</code> เป็นการตั้งชื่อ collection ครอบตัวข้อมูล location ของเราในที่นี้ตั้งชื่อว่า items</li>
</ul>

<blockquote>
<p>ตอนนี้อาจจะยังไม่เห็นภาพเดี่ยวพอเห็นข้อมูล Json น่าจะเข้าใจ</p>
</blockquote>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">app\controllers</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">yii\rest\ActiveController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">yii\models\Location</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">LocationController</span> <span class="k">extends</span> <span class="nx">ActiveController</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nv">$modelClass</span> <span class="o">=</span> <span class="s1">&#39;app\models\Locations&#39;</span><span class="p">;</span>
    <span class="k">public</span> <span class="nv">$serializer</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;class&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yii\rest\Serializer&#39;</span><span class="p">,</span>
        <span class="s1">&#39;collectionEnvelope&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;items&#39;</span><span class="p">,</span>
    <span class="p">];</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="configuring-url-rule">Configuring URL Rule</h2>

<p>การเปิดใช้งาน url ในแบบ RESTful  ให้ทำการตั้งค่าเพิ่มเข้าไปที่ <code>config\main.php</code>
ในส่วน components โดยเพิ่มส่วนนี้เข้าไป</p>

<blockquote>
<p>ในส่วนนี้เราต้องเปิดการใช้งาน PrettyUrl ให้ได้เสียก่อน <a href="https://github.com/dimpled/Yii2-Learning/blob/master/tutorial/modrewrite.md">ดูการติดตั้งได้ที่นี่</a></p>
</blockquote>

<p>ให้เพิ่มคำสั่งนี้เข้าไปที่ <code>rules</code> ซึ่งจะเป็นการระบุให้ LocationController  ใช้งาน <code>url</code> แบบ RESTful  ได้</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">[&#39;class&#39; =&gt; &#39;yii\rest\UrlRule&#39;, &#39;controller&#39; =&gt; &#39;location&#39;]</span>
</code></pre></div>
<p>จะได้แบบนี้</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">&#39;urlManager&#39; =&gt; [</span>
<span class="x">    &#39;enablePrettyUrl&#39; =&gt; true,</span>
<span class="x">    &#39;enableStrictParsing&#39; =&gt; true,</span>
<span class="x">    &#39;showScriptName&#39; =&gt; false,</span>
<span class="x">    &#39;rules&#39; =&gt; [</span>
<span class="x">        [&#39;class&#39; =&gt; &#39;yii\rest\UrlRule&#39;, &#39;controller&#39; =&gt; &#39;location&#39;,  &#39;pluralize&#39;=&gt;false],</span>
<span class="x">    ],</span>
<span class="x">]</span>
</code></pre></div>
<p>หากใครเปิดการใช้งาน PrettyUrl อยู่แล้วก็เพิ่มเข้าไปแบบนี้</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">&#39;urlManager&#39; =&gt; [</span>
<span class="x">  &#39;class&#39; =&gt; &#39;yii\web\UrlManager&#39;,</span>
<span class="x">  &#39;showScriptName&#39; =&gt; false,</span>
<span class="x">  &#39;enablePrettyUrl&#39; =&gt; true,</span>
<span class="x">  &#39;rules&#39; =&gt; [</span>
<span class="x">        &#39;&lt;controller:\w+&gt;/&lt;id:\d+&gt;&#39; =&gt; &#39;&lt;controller&gt;/view&#39;,</span>
<span class="x">        &#39;&lt;controller:\w+&gt;/&lt;action:\w+&gt;/&lt;id:\d+&gt;&#39; =&gt; &#39;&lt;controller&gt;/&lt;action&gt;&#39;,</span>
<span class="x">        &#39;&lt;controller:\w+&gt;/&lt;action:\w+&gt;&#39; =&gt; &#39;&lt;controller&gt;/&lt;action&gt;&#39;,</span>
<span class="x">        [&#39;class&#39; =&gt; &#39;yii\rest\UrlRule&#39;, &#39;controller&#39; =&gt; &#39;location&#39;],</span>
<span class="x">  ],</span>
<span class="x">],</span>
</code></pre></div>
<h2 id="enabling-json-input">Enabling JSON Input</h2>

<p>เปิดการเปิดการใช้งาน ให้สามารถรับค่าที่อยู่ในรูปแบบของ Json ได้ เพราะเวลาที่เราเรียกใช้งานหรือทำการส่งค่าอะไรมามันจะต้องอยู่ในรูปแบบของ Json โดยเพิ่มเข้าไปที่ application components ของ config/main.php  ใส่โค้ดเข้าไปดังนี้</p>

<p>ของเดิมจะเป็นแบบนี้และส่วนของ <code>cookieValidationKey</code> ค่าจะไม่เหมือนกัน</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">&#39;request&#39; =&gt; [</span>
<span class="x">    &#39;cookieValidationKey&#39; =&gt; &#39;xxxxx......&#39;,</span>
<span class="x">],</span>
</code></pre></div>
<p>โดยเพิ่มเข้าไป</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">&#39;request&#39; =&gt; [</span>
<span class="x">    &#39;cookieValidationKey&#39; =&gt; &#39;xxxxx......&#39;,</span>
<span class="x">    &#39;parsers&#39; =&gt; [</span>
<span class="x">        &#39;application/json&#39; =&gt; &#39;yii\web\JsonParser&#39;,</span>
<span class="x">    ]</span>
<span class="x">]</span>
</code></pre></div>
<h2 id="trying-it-out">Trying it Out</h2>

<p>การใช้งาน เราจะต้องเข้าใจนิยามของการเรียกใช้งาน RESTful ก่อน ซึ่งส่วนใหญ่ก็จะใช้มาตรฐานแบบนี้</p>

<table><thead>
<tr>
<th>Method</th>
<th style="text-align: center">Url</th>
<th style="text-align: right">Description</th>
</tr>
</thead><tbody>
<tr>
<td>GET</td>
<td style="text-align: center">/location</td>
<td style="text-align: right">แสดงข้อมูล location ทั้งหมด (page by page)</td>
</tr>
<tr>
<td>HEAD</td>
<td style="text-align: center">/location</td>
<td style="text-align: right">แสดงข้อมูล location เฉพาะ header (page by page)</td>
</tr>
<tr>
<td>POST</td>
<td style="text-align: center">/location</td>
<td style="text-align: right">เพิ่ม location ใหม่ จะต้องแนบข้อมูลมาด้วย</td>
</tr>
<tr>
<td>GET</td>
<td style="text-align: center">/location/5</td>
<td style="text-align: right">แสดงข้อมูล location ที่ pk เท่ากับ 5</td>
</tr>
<tr>
<td>HEAD</td>
<td style="text-align: center">/location/5</td>
<td style="text-align: right">แสดงข้อมูล location เฉพาะ header ที่ pk เท่ากับ 5</td>
</tr>
<tr>
<td>PATCH</td>
<td style="text-align: center">/location/5</td>
<td style="text-align: right">แก้ไขข้อมูล location ที่ pk = 5</td>
</tr>
<tr>
<td>DELETE</td>
<td style="text-align: center">/location</td>
<td style="text-align: right">ลบข้อมูล locaiont ที่ pk = 5</td>
</tr>
</tbody></table>

<p>ทดสอบลองเรียกใช้งานผ่าน <code>curl</code> ดู mac,linux เปิด Terminal แล้วพิมพ์คำสั่งนี้ ส่วน windows ต้องติดต้ง curl เพิ่มหากต้องการทดสอบผ่าน curl <a href="http://curl.haxx.se/download.html">ดาวน์โหลดได้ที่นี่</a> ขอดีของการทดสอบผ่าน curl คือมันสามารถเรียกได้ ทุก method ถ้ารันผ่าน url บน browser มันจะได้แค่ Method <code>GET</code></p>

<blockquote>
<p>โปรเจคของผมอยู่ที่ <code>/yii2/yii2-Leanning-Source</code> ซึ่ง path ของคุณจะไม่ตรงกับของผมซึ่งก็ขึ้นอยู่กับว่าเราตั้งชื่อว่าอะไร</p>
</blockquote>

<h3 id="find-all-method-get">FIND All : Method GET</h3>

<p>Url
<code>
http://127.0.0.1/yii2/yii2-Leanning-Source/web/location
</code>
เป็นการเรียกข้อมูล location โดยใช้ method GET ซึ่งจะเป็นการแสดงข้อมูลของ location ทีละ page เทียบได้กับ sql <code>select * from location limit 20 offset 0</code></p>

<p>เรียกใช้งาน</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">curl -i -H &quot;Accept:application/json&quot; &quot;http://127.0.0.1/yii2/yii2-Leanning-Source/web/location&quot;
</code></pre></div>
<blockquote>
<p>ลองสังเกตตรง header จะมี header link,X-Pagination ขึ้นมา ซึ่งตรงนี้มีค่า url หน้าปัจจุบัน, หน้าต่อไป, หน้าสุดท้าย ผมเข้าใจว่านี้คือ <a href="http://en.wikipedia.org/wiki/HATEOAS">ATEOAS;</a> ซื่ง web service ส่วนใหญ่จะมีแค่ data ออกมาเท่านั้นจะไม่มี ATEOAS; ซึ่ง Yii 2 มี  ฮา...ใครมีรายละเอียดก็ช่วยเพิ่มเติมหน่อยละกันครับ</p>
</blockquote>

<p>Result</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="err">HTTP/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="err">OK</span>
<span class="err">Date:</span> <span class="err">Fri,</span> <span class="mi">13</span> <span class="err">Mar</span> <span class="mi">2015</span> <span class="mi">05</span><span class="err">:</span><span class="mi">40</span><span class="err">:</span><span class="mi">59</span> <span class="err">GMT</span>
<span class="err">Server:</span> <span class="err">Apache/</span><span class="mf">2.4</span><span class="err">.</span><span class="mi">9</span> <span class="err">(Unix)</span> <span class="err">PHP/</span><span class="mf">5.6</span><span class="err">.</span><span class="mi">4</span>
<span class="err">X-Powered-By:</span> <span class="err">PHP/</span><span class="mf">5.6</span><span class="err">.</span><span class="mi">4</span>
<span class="err">X-Pagination-Total-Count:</span> <span class="mi">10567</span>
<span class="err">X-Pagination-Page-Count:</span> <span class="mi">529</span>
<span class="err">X-Pagination-Current-Page:</span> <span class="mi">1</span>
<span class="err">X-Pagination-Per-Page:</span> <span class="mi">20</span>
<span class="err">Link:</span> <span class="err">&lt;http://</span><span class="mf">127.0</span><span class="err">.</span><span class="mf">0.1</span><span class="err">/yii</span><span class="mi">2</span><span class="err">/yii</span><span class="mi">2</span><span class="err">-Leanning-Source/web/location/index?page=</span><span class="mi">1</span><span class="err">&gt;;</span> <span class="err">rel=self,</span> <span class="err">&lt;http://</span><span class="mf">127.0</span><span class="err">.</span><span class="mf">0.1</span><span class="err">/yii</span><span class="mi">2</span><span class="err">/yii</span><span class="mi">2</span><span class="err">-Leanning-Source/web/location/index?page=</span><span class="mi">2</span><span class="err">&gt;;</span> <span class="err">rel=next,</span> <span class="err">&lt;http://</span><span class="mf">127.0</span><span class="err">.</span><span class="mf">0.1</span><span class="err">/yii</span><span class="mi">2</span><span class="err">/yii</span><span class="mi">2</span><span class="err">-Leanning-Source/web/location/index?page=</span><span class="mi">529</span><span class="err">&gt;;</span> <span class="err">rel=last</span>
<span class="err">Content-Length:</span> <span class="mi">2554</span>
<span class="err">Content-Type:</span> <span class="err">application/json;</span> <span class="err">charset=UTF</span><span class="mi">-8</span>

<span class="p">{</span><span class="nt">&quot;items&quot;</span><span class="p">:[{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Kabul&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">34.5166667</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">69.1833344</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">1808</span><span class="p">},{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Kandahar&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">31.61</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">65.6999969</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">1015</span><span class="p">},{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Mazar-e Sharif&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">36.7069444</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">67.1122208</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">369</span><span class="p">},{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Herat&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">34.34</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">62.1899986</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">927</span><span class="p">},{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Jalalabad&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">34.42</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">70.4499969</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">573</span><span class="p">},{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Konduz&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">36.72</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">68.8600006</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">394</span><span class="p">},{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">7</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Ghazni&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">33.5535554</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">68.4268875</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">2175</span><span class="p">},{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Balkh&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">36.7586111</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">66.8961105</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">328</span><span class="p">},{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">9</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Baghlan&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">36.12</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">68.6999969</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">565</span><span class="p">},{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Gardez&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">33.59</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">69.2200012</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">2279</span><span class="p">},{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">11</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Khost&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">33.3380556</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">69.9202805</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">1178</span><span class="p">},{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">12</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Khanabad&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">36.68</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">69.1100006</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">490</span><span class="p">},{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">13</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Tashqorghan&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">36.6952778</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">67.6980591</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">460</span><span class="p">},{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">14</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Taloqan&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">36.7360511</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">69.5345078</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">788</span><span class="p">},{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">15</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Cool urhajo&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">34.2654452</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">67.3451614</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">2733</span><span class="p">},{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">16</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Pol-e Khomri&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">35.9425</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">68.7191696</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">832</span><span class="p">},{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">17</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Sheberghan&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">36.6672222</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">65.7536087</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">362</span><span class="p">},{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Charikar&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">35.013611</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">69.1713867</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">1534</span><span class="p">},{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">19</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Sar-e Pol&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">36.2155556</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">65.9363861</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">629</span><span class="p">},{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Paghman&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">34.5875</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">68.953331</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">2276</span><span class="p">}],</span><span class="nt">&quot;_links&quot;</span><span class="p">:{</span><span class="nt">&quot;self&quot;</span><span class="p">:{</span><span class="nt">&quot;href&quot;</span><span class="p">:</span><span class="s2">&quot;http://127.0.0.1/yii2/yii2-Leanning-Source/web/location/index?page=1&quot;</span><span class="p">},</span><span class="nt">&quot;next&quot;</span><span class="p">:{</span><span class="nt">&quot;href&quot;</span><span class="p">:</span><span class="s2">&quot;http://127.0.0.1/yii2/yii2-Leanning-Source/web/location/index?page=2&quot;</span><span class="p">},</span><span class="nt">&quot;last&quot;</span><span class="p">:{</span><span class="nt">&quot;href&quot;</span><span class="p">:</span><span class="s2">&quot;http://127.0.0.1/yii2/yii2-Leanning-Source/web/location/index?page=529&quot;</span><span class="p">}},</span><span class="nt">&quot;_meta&quot;</span><span class="p">:{</span><span class="nt">&quot;totalCount&quot;</span><span class="p">:</span><span class="mi">10567</span><span class="p">,</span><span class="nt">&quot;pageCount&quot;</span><span class="p">:</span><span class="mi">529</span><span class="p">,</span><span class="nt">&quot;currentPage&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="nt">&quot;perPage&quot;</span><span class="p">:</span><span class="mi">20</span><span class="p">}}</span><span class="err">%</span>  
</code></pre></div>
<p>เราสามารถเปลี่ยนเป็น xml ได้ <code>application/xml</code> action อื่นๆ ก็เหมือนกันนะครับ</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">curl -i -H &quot;Accept:application/xml&quot; &quot;http://127.0.0.1/yii2/yii2-Leanning-Source/web/location&quot;
</code></pre></div>
<p>Result</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml">HTTP/1.1 200 OK
Date: Fri, 13 Mar 2015 05:36:17 GMT
Server: Apache/2.4.9 (Unix) PHP/5.6.4
X-Powered-By: PHP/5.6.4
X-Pagination-Total-Count: 10567
X-Pagination-Page-Count: 529
X-Pagination-Current-Page: 1
X-Pagination-Per-Page: 20
Link: <span class="nt">&lt;http:</span><span class="err">//127.0.0.1/yii2/yii2-Leanning-Source/web/location/index?</span><span class="na">page=</span><span class="s">1</span><span class="nt">&gt;</span>; rel=self, <span class="nt">&lt;http:</span><span class="err">//127.0.0.1/yii2/yii2-Leanning-Source/web/location/index?</span><span class="na">page=</span><span class="s">2</span><span class="nt">&gt;</span>; rel=next, <span class="nt">&lt;http:</span><span class="err">//127.0.0.1/yii2/yii2-Leanning-Source/web/location/index?</span><span class="na">page=</span><span class="s">529</span><span class="nt">&gt;</span>; rel=last
Content-Length: 3712
Content-Type: application/xml; charset=UTF-8

<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;response&gt;&lt;items&gt;&lt;item&gt;&lt;id&gt;</span>1<span class="nt">&lt;/id&gt;&lt;country&gt;</span>Afghanistan<span class="nt">&lt;/country&gt;&lt;city&gt;</span>Kabul<span class="nt">&lt;/city&gt;&lt;latitude&gt;</span>34.5166667<span class="nt">&lt;/latitude&gt;&lt;longitude&gt;</span>69.1833344<span class="nt">&lt;/longitude&gt;&lt;altitude&gt;</span>1808<span class="nt">&lt;/altitude&gt;&lt;/item&gt;&lt;item&gt;&lt;id&gt;</span>2<span class="nt">&lt;/id&gt;&lt;country&gt;</span>Afghanistan<span class="nt">&lt;/country&gt;&lt;city&gt;</span>Kandahar<span class="nt">&lt;/city&gt;&lt;latitude&gt;</span>31.61<span class="nt">&lt;/latitude&gt;&lt;longitude&gt;</span>65.6999969<span class="nt">&lt;/longitude&gt;&lt;altitude&gt;</span>1015<span class="nt">&lt;/altitude&gt;&lt;/item&gt;&lt;item&gt;&lt;id&gt;</span>3<span class="nt">&lt;/id&gt;&lt;country&gt;</span>Afghanistan<span class="nt">&lt;/country&gt;&lt;city&gt;</span>Mazar-e Sharif<span class="nt">&lt;/city&gt;&lt;latitude&gt;</span>36.7069444<span class="nt">&lt;/latitude&gt;&lt;longitude&gt;</span>67.1122208<span class="nt">&lt;/longitude&gt;&lt;altitude&gt;</span>369<span class="nt">&lt;/altitude&gt;&lt;/item&gt;&lt;item&gt;&lt;id&gt;</span>4<span class="nt">&lt;/id&gt;&lt;country&gt;</span>Afghanistan<span class="nt">&lt;/country&gt;&lt;city&gt;</span>Herat<span class="nt">&lt;/city&gt;&lt;latitude&gt;</span>34.34<span class="nt">&lt;/latitude&gt;&lt;longitude&gt;</span>62.1899986<span class="nt">&lt;/longitude&gt;&lt;altitude&gt;</span>927<span class="nt">&lt;/altitude&gt;&lt;/item&gt;&lt;item&gt;&lt;id&gt;</span>5<span class="nt">&lt;/id&gt;&lt;country&gt;</span>Afghanistan<span class="nt">&lt;/country&gt;&lt;city&gt;</span>Jalalabad<span class="nt">&lt;/city&gt;&lt;latitude&gt;</span>34.42<span class="nt">&lt;/latitude&gt;&lt;longitude&gt;</span>70.4499969<span class="nt">&lt;/longitude&gt;&lt;altitude&gt;</span>573<span class="nt">&lt;/altitude&gt;&lt;/item&gt;&lt;item&gt;&lt;id&gt;</span>6<span class="nt">&lt;/id&gt;&lt;country&gt;</span>Afghanistan<span class="nt">&lt;/country&gt;&lt;city&gt;</span>Konduz<span class="nt">&lt;/city&gt;&lt;latitude&gt;</span>36.72<span class="nt">&lt;/latitude&gt;&lt;longitude&gt;</span>68.8600006<span class="nt">&lt;/longitude&gt;&lt;altitude&gt;</span>394<span class="nt">&lt;/altitude&gt;&lt;/item&gt;&lt;item&gt;&lt;id&gt;</span>7<span class="nt">&lt;/id&gt;&lt;country&gt;</span>Afghanistan<span class="nt">&lt;/country&gt;&lt;city&gt;</span>Ghazni<span class="nt">&lt;/city&gt;&lt;latitude&gt;</span>33.5535554<span class="nt">&lt;/latitude&gt;&lt;longitude&gt;</span>68.4268875<span class="nt">&lt;/longitude&gt;&lt;altitude&gt;</span>2175<span class="nt">&lt;/altitude&gt;&lt;/item&gt;&lt;item&gt;&lt;id&gt;</span>8<span class="nt">&lt;/id&gt;&lt;country&gt;</span>Afghanistan<span class="nt">&lt;/country&gt;&lt;city&gt;</span>Balkh<span class="nt">&lt;/city&gt;&lt;latitude&gt;</span>36.7586111<span class="nt">&lt;/latitude&gt;&lt;longitude&gt;</span>66.8961105<span class="nt">&lt;/longitude&gt;&lt;altitude&gt;</span>328<span class="nt">&lt;/altitude&gt;&lt;/item&gt;&lt;item&gt;&lt;id&gt;</span>9<span class="nt">&lt;/id&gt;&lt;country&gt;</span>Afghanistan<span class="nt">&lt;/country&gt;&lt;city&gt;</span>Baghlan<span class="nt">&lt;/city&gt;&lt;latitude&gt;</span>36.12<span class="nt">&lt;/latitude&gt;&lt;longitude&gt;</span>68.6999969<span class="nt">&lt;/longitude&gt;&lt;altitude&gt;</span>565<span class="nt">&lt;/altitude&gt;&lt;/item&gt;&lt;item&gt;&lt;id&gt;</span>10<span class="nt">&lt;/id&gt;&lt;country&gt;</span>Afghanistan<span class="nt">&lt;/country&gt;&lt;city&gt;</span>Gardez<span class="nt">&lt;/city&gt;&lt;latitude&gt;</span>33.59<span class="nt">&lt;/latitude&gt;&lt;longitude&gt;</span>69.2200012<span class="nt">&lt;/longitude&gt;&lt;altitude&gt;</span>2279<span class="nt">&lt;/altitude&gt;&lt;/item&gt;&lt;item&gt;&lt;id&gt;</span>11<span class="nt">&lt;/id&gt;&lt;country&gt;</span>Afghanistan<span class="nt">&lt;/country&gt;&lt;city&gt;</span>Khost<span class="nt">&lt;/city&gt;&lt;latitude&gt;</span>33.3380556<span class="nt">&lt;/latitude&gt;&lt;longitude&gt;</span>69.9202805<span class="nt">&lt;/longitude&gt;&lt;altitude&gt;</span>1178<span class="nt">&lt;/altitude&gt;&lt;/item&gt;&lt;item&gt;&lt;id&gt;</span>12<span class="nt">&lt;/id&gt;&lt;country&gt;</span>Afghanistan<span class="nt">&lt;/country&gt;&lt;city&gt;</span>Khanabad<span class="nt">&lt;/city&gt;&lt;latitude&gt;</span>36.68<span class="nt">&lt;/latitude&gt;&lt;longitude&gt;</span>69.1100006<span class="nt">&lt;/longitude&gt;&lt;altitude&gt;</span>490<span class="nt">&lt;/altitude&gt;&lt;/item&gt;&lt;item&gt;&lt;id&gt;</span>13<span class="nt">&lt;/id&gt;&lt;country&gt;</span>Afghanistan<span class="nt">&lt;/country&gt;&lt;city&gt;</span>Tashqorghan<span class="nt">&lt;/city&gt;&lt;latitude&gt;</span>36.6952778<span class="nt">&lt;/latitude&gt;&lt;longitude&gt;</span>67.6980591<span class="nt">&lt;/longitude&gt;&lt;altitude&gt;</span>460<span class="nt">&lt;/altitude&gt;&lt;/item&gt;&lt;item&gt;&lt;id&gt;</span>14<span class="nt">&lt;/id&gt;&lt;country&gt;</span>Afghanistan<span class="nt">&lt;/country&gt;&lt;city&gt;</span>Taloqan<span class="nt">&lt;/city&gt;&lt;latitude&gt;</span>36.7360511<span class="nt">&lt;/latitude&gt;&lt;longitude&gt;</span>69.5345078<span class="nt">&lt;/longitude&gt;&lt;altitude&gt;</span>788<span class="nt">&lt;/altitude&gt;&lt;/item&gt;&lt;item&gt;&lt;id&gt;</span>15<span class="nt">&lt;/id&gt;&lt;country&gt;</span>Afghanistan<span class="nt">&lt;/country&gt;&lt;city&gt;</span>Cool urhajo<span class="nt">&lt;/city&gt;&lt;latitude&gt;</span>34.2654452<span class="nt">&lt;/latitude&gt;&lt;longitude&gt;</span>67.3451614<span class="nt">&lt;/longitude&gt;&lt;altitude&gt;</span>2733<span class="nt">&lt;/altitude&gt;&lt;/item&gt;&lt;item&gt;&lt;id&gt;</span>16<span class="nt">&lt;/id&gt;&lt;country&gt;</span>Afghanistan<span class="nt">&lt;/country&gt;&lt;city&gt;</span>Pol-e Khomri<span class="nt">&lt;/city&gt;&lt;latitude&gt;</span>35.9425<span class="nt">&lt;/latitude&gt;&lt;longitude&gt;</span>68.7191696<span class="nt">&lt;/longitude&gt;&lt;altitude&gt;</span>832<span class="nt">&lt;/altitude&gt;&lt;/item&gt;&lt;item&gt;&lt;id&gt;</span>17<span class="nt">&lt;/id&gt;&lt;country&gt;</span>Afghanistan<span class="nt">&lt;/country&gt;&lt;city&gt;</span>Sheberghan<span class="nt">&lt;/city&gt;&lt;latitude&gt;</span>36.6672222<span class="nt">&lt;/latitude&gt;&lt;longitude&gt;</span>65.7536087<span class="nt">&lt;/longitude&gt;&lt;altitude&gt;</span>362<span class="nt">&lt;/altitude&gt;&lt;/item&gt;&lt;item&gt;&lt;id&gt;</span>18<span class="nt">&lt;/id&gt;&lt;country&gt;</span>Afghanistan<span class="nt">&lt;/country&gt;&lt;city&gt;</span>Charikar<span class="nt">&lt;/city&gt;&lt;latitude&gt;</span>35.013611<span class="nt">&lt;/latitude&gt;&lt;longitude&gt;</span>69.1713867<span class="nt">&lt;/longitude&gt;&lt;altitude&gt;</span>1534<span class="nt">&lt;/altitude&gt;&lt;/item&gt;&lt;item&gt;&lt;id&gt;</span>19<span class="nt">&lt;/id&gt;&lt;country&gt;</span>Afghanistan<span class="nt">&lt;/country&gt;&lt;city&gt;</span>Sar-e Pol<span class="nt">&lt;/city&gt;&lt;latitude&gt;</span>36.2155556<span class="nt">&lt;/latitude&gt;&lt;longitude&gt;</span>65.9363861<span class="nt">&lt;/longitude&gt;&lt;altitude&gt;</span>629<span class="nt">&lt;/altitude&gt;&lt;/item&gt;&lt;item&gt;&lt;id&gt;</span>20<span class="nt">&lt;/id&gt;&lt;country&gt;</span>Afghanistan<span class="nt">&lt;/country&gt;&lt;city&gt;</span>Paghman<span class="nt">&lt;/city&gt;&lt;latitude&gt;</span>34.5875<span class="nt">&lt;/latitude&gt;&lt;longitude&gt;</span>68.953331<span class="nt">&lt;/longitude&gt;&lt;altitude&gt;</span>2276<span class="nt">&lt;/altitude&gt;&lt;/item&gt;&lt;/items&gt;&lt;_links&gt;&lt;self&gt;&lt;href&gt;</span>http://127.0.0.1/yii2/yii2-Leanning-Source/web/location/index?page=1<span class="nt">&lt;/href&gt;&lt;/self&gt;&lt;next&gt;&lt;href&gt;</span>http://127.0.0.1/yii2/yii2-Leanning-Source/web/location/index?page=2<span class="nt">&lt;/href&gt;&lt;/next&gt;&lt;last&gt;&lt;href&gt;</span>http://127.0.0.1/yii2/yii2-Leanning-Source/web/location/index?page=529<span class="nt">&lt;/href&gt;&lt;/last&gt;&lt;/_links&gt;&lt;_meta&gt;&lt;totalCount&gt;</span>10567<span class="nt">&lt;/totalCount&gt;&lt;pageCount&gt;</span>529<span class="nt">&lt;/pageCount&gt;&lt;currentPage&gt;</span>1<span class="nt">&lt;/currentPage&gt;&lt;perPage&gt;</span>20<span class="nt">&lt;/perPage&gt;&lt;/_meta&gt;&lt;/response&gt;</span>
</code></pre></div>
<h2 id="find-by-pk-method-get">FIND BY PK : Method GET</h2>

<h4 id="url">url</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">http://127.0.0.1/yii2/yii2-Leanning-Source/web/location/5
</code></pre></div>
<p>ค้นหาข้อมูล <code>location</code> ที่ primary key = 5 โดยใช้ method GET
เทียบได้กับ sql <code>select * from location where id =5</code></p>

<p>เรียกใช้งาน</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">curl -i -H &quot;Accept:application/json&quot; &quot;http://127.0.0.1/yii2/yii2-Leanning-Source/web/location/5&quot;
</code></pre></div>
<p>Result</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="err">HTTP/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="err">OK</span>
<span class="err">Date:</span> <span class="err">Thu,</span> <span class="mi">12</span> <span class="err">Mar</span> <span class="mi">2015</span> <span class="mi">17</span><span class="err">:</span><span class="mi">54</span><span class="err">:</span><span class="mi">52</span> <span class="err">GMT</span>
<span class="err">Server:</span> <span class="err">Apache/</span><span class="mf">2.4</span><span class="err">.</span><span class="mi">9</span> <span class="err">(Unix)</span> <span class="err">PHP/</span><span class="mf">5.6</span><span class="err">.</span><span class="mi">4</span>
<span class="err">X-Powered-By:</span> <span class="err">PHP/</span><span class="mf">5.6</span><span class="err">.</span><span class="mi">4</span>
<span class="err">Content-Length:</span> <span class="mi">106</span>
<span class="err">Content-Type:</span> <span class="err">application/json;</span> <span class="err">charset=UTF</span><span class="mi">-8</span>

<span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Afghanistan&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Jalalabad&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">34.42</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">70.4499969</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">573</span><span class="p">}</span><span class="err">%</span>
</code></pre></div>
<h2 id="create-method-post">CREATE : Method POST</h2>

<p>url</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">http://127.0.0.1/yii2/yii2-Leanning-Source/web/location
</code></pre></div>
<p>เป็นการเพิ่มข้อมูล โดยใช้ method POST และต้องแนบข้อมูลที่จะทำการเพิ่มไปด้วย</p>

<p>เรียกใช้งาน</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">curl -i -H &quot;Accept:application/json&quot; -H &quot;Content-Type:application/json&quot; -XPOST &quot;http://127.0.0.1/yii2/yii2-Leanning-Source/web/location&quot; -d &#39;{&quot;id&quot;:null,&quot;country&quot;:&quot;Thailand&quot;,&quot;city&quot;:&quot;Jalalabad&quot;,&quot;latitude&quot;:34.42,&quot;longitude&quot;:70.4499969,&quot;altitude&quot;:573}&#39;
</code></pre></div>
<p>result</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="err">HTTP/</span><span class="mf">1.1</span> <span class="mi">201</span> <span class="err">Created</span>
<span class="err">Date:</span> <span class="err">Sun,</span> <span class="mi">15</span> <span class="err">Mar</span> <span class="mi">2015</span> <span class="mi">01</span><span class="err">:</span><span class="mi">50</span><span class="err">:</span><span class="mi">40</span> <span class="err">GMT</span>
<span class="err">Server:</span> <span class="err">Apache/</span><span class="mf">2.4</span><span class="err">.</span><span class="mi">9</span> <span class="err">(Unix)</span> <span class="err">PHP/</span><span class="mf">5.6</span><span class="err">.</span><span class="mi">4</span>
<span class="err">X-Powered-By:</span> <span class="err">PHP/</span><span class="mf">5.6</span><span class="err">.</span><span class="mi">4</span>
<span class="err">Location:</span> <span class="err">http://</span><span class="mf">127.0</span><span class="err">.</span><span class="mf">0.1</span><span class="err">/yii</span><span class="mi">2</span><span class="err">/yii</span><span class="mi">2</span><span class="err">-Leanning-Source/web/location/</span><span class="mi">10570</span>
<span class="err">Content-Length:</span> <span class="mi">107</span>
<span class="err">Content-Type:</span> <span class="err">application/json;</span> <span class="err">charset=UTF</span><span class="mi">-8</span>

<span class="p">{</span><span class="nt">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;Thailand&quot;</span><span class="p">,</span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Jalalabad&quot;</span><span class="p">,</span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="mf">34.42</span><span class="p">,</span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="mf">70.4499969</span><span class="p">,</span><span class="nt">&quot;altitude&quot;</span><span class="p">:</span><span class="mi">573</span><span class="p">,</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">10570</span><span class="p">}</span><span class="err">%</span>  
</code></pre></div>
<h1 id="update-method-patct-put">UPDATE : Method PATCT,PUT</h1>

<p>url</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">http://127.0.0.1/yii2/yii2-Leanning-Source/web/location/update/10574
</code></pre></div>
<p>เป็นการแก้ไขข้อมูลที่ primary key = 10570 และส่งข้อมูลที่จะแก้ไขไปด้วย</p>

<p>เรียกใช้งาน</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">curl -i -H &quot;Accept:application/json&quot; -H &quot;Content-Type:application/json&quot; -XPATCH &quot;http://127.0.0.1/yii2/yii2-Leanning-Source/web/location/update/10574&quot; -d &#39;{&quot;country&quot;:&quot;Thailand&quot;,&quot;city&quot;:&quot;Jalalabad&quot;,&quot;latitude&quot;:34.42,&quot;longitude&quot;:70.4499969,&quot;altitude&quot;:573}&#39;
</code></pre></div>
<p>Result</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">HTTP/1.1 200 OK
Date: Sun, 15 Mar 2015 07:04:34 GMT
Server: Apache/2.4.9 (Unix) PHP/5.6.4
X-Powered-By: PHP/5.6.4
Content-Length: 111
Content-Type: application/json; charset=UTF-8

{&quot;id&quot;:10574,&quot;country&quot;:&quot;Thailand&quot;,&quot;city&quot;:&quot;Jalalabad&quot;,&quot;latitude&quot;:34.42,&quot;longitude&quot;:70.4499969,&quot;altitude&quot;:573}%
</code></pre></div>
<h1 id="deletd-method-delete">DELETD : Method DELETE</h1>

<p>url</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">http://127.0.0.1/yii2/yii2-Leanning-Source/web/location/delete/10570
</code></pre></div>
<p>เป็นการลบข้อมูลโดยอ้างไปที่ primary key = 10570</p>

<p>เรียกใช้งาน</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">curl -i -H &quot;Accept:application/json&quot; -H &quot;Content-Type:application/json&quot; -XDELETE &quot;http://127.0.0.1/yii2/yii2-Leanning-Source/web/location/delete/10570&quot;
</code></pre></div>
<p>Result</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="err">HTTP/</span><span class="mf">1.1</span> <span class="mi">204</span> <span class="err">No</span> <span class="err">Content</span>
<span class="err">Date:</span> <span class="err">Sun,</span> <span class="mi">15</span> <span class="err">Mar</span> <span class="mi">2015</span> <span class="mi">06</span><span class="err">:</span><span class="mi">55</span><span class="err">:</span><span class="mi">55</span> <span class="err">GMT</span>
<span class="err">Server:</span> <span class="err">Apache/</span><span class="mf">2.4</span><span class="err">.</span><span class="mi">9</span> <span class="err">(Unix)</span> <span class="err">PHP/</span><span class="mf">5.6</span><span class="err">.</span><span class="mi">4</span>
<span class="err">X-Powered-By:</span> <span class="err">PHP/</span><span class="mf">5.6</span><span class="err">.</span><span class="mi">4</span>
<span class="err">Content-Length:</span> <span class="mi">0</span>
<span class="err">Content-Type:</span> <span class="err">application/json;</span> <span class="err">charset=UTF</span><span class="mi">-8</span>
</code></pre></div>
<h1 id="method-head">METHOD : HEAD</h1>

<p>ตรงนี้ยังไม่แน่ใจนะครับว่าเอาไว้ทำอะไรเพราะมันจะแสดงข้อมูลแค่ Header</p>

<h2 id="find-by-pk-method-head">FIND BY PK : Method HEAD</h2>

<p>Url</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">http://127.0.0.1/yii2/yii2-Leanning-Source/web/location
</code></pre></div>
<p>เป็นการเรียกดูข้อมูล <code>location</code> ทีละ page โดยใช้ method HEAD ซึ่งจะเป็นการแสดงข้อมูลของ location ทีละ page แต่แสดงแค่ header  เทียบได้กับ sql <code>select * from location limit 20 offset 0</code></p>

<p>เรียกใช้งาน</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">curl -i -H &quot;Accept:application/json&quot; -XHEAD &quot;http://127.0.0.1/yii2/yii2-Leanning-Source/web/location&quot;
</code></pre></div>
<p>Result
สังเกตดูจะไม่มีข้อมูลนะครับ จะมีแค่ header</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="err">HTTP/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="err">OK</span>
<span class="err">Date:</span> <span class="err">Fri,</span> <span class="mi">13</span> <span class="err">Mar</span> <span class="mi">2015</span> <span class="mi">04</span><span class="err">:</span><span class="mi">40</span><span class="err">:</span><span class="mi">46</span> <span class="err">GMT</span>
<span class="err">Server:</span> <span class="err">Apache/</span><span class="mf">2.4</span><span class="err">.</span><span class="mi">9</span> <span class="err">(Unix)</span> <span class="err">PHP/</span><span class="mf">5.6</span><span class="err">.</span><span class="mi">4</span>
<span class="err">X-Powered-By:</span> <span class="err">PHP/</span><span class="mf">5.6</span><span class="err">.</span><span class="mi">4</span>
<span class="err">X-Pagination-Total-Count:</span> <span class="mi">10567</span>
<span class="err">X-Pagination-Page-Count:</span> <span class="mi">529</span>
<span class="err">X-Pagination-Current-Page:</span> <span class="mi">1</span>
<span class="err">X-Pagination-Per-Page:</span> <span class="mi">20</span>
<span class="err">Link:</span> <span class="err">&lt;http://</span><span class="mf">127.0</span><span class="err">.</span><span class="mf">0.1</span><span class="err">/yii</span><span class="mi">2</span><span class="err">/yii</span><span class="mi">2</span><span class="err">-Leanning-Source/web/location/index?page=</span><span class="mi">1</span><span class="err">&gt;;</span> <span class="err">rel=self,</span> <span class="err">&lt;http://</span><span class="mf">127.0</span><span class="err">.</span><span class="mf">0.1</span><span class="err">/yii</span><span class="mi">2</span><span class="err">/yii</span><span class="mi">2</span><span class="err">-Leanning-Source/web/location/index?page=</span><span class="mi">2</span><span class="err">&gt;;</span> <span class="err">rel=next,</span> <span class="err">&lt;http://</span><span class="mf">127.0</span><span class="err">.</span><span class="mf">0.1</span><span class="err">/yii</span><span class="mi">2</span><span class="err">/yii</span><span class="mi">2</span><span class="err">-Leanning-Source/web/location/index?page=</span><span class="mi">529</span><span class="err">&gt;;</span> <span class="err">rel=last</span>
<span class="err">Content-Type:</span> <span class="err">application/json;</span> <span class="err">charset=UTF</span><span class="mi">-8</span>
</code></pre></div>
<h2 id="find-by-pk-method-head">FIND BY PK : Method HEAD</h2>

<p>url</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">http://127.0.0.1/yii2/yii2-Leanning-Source/web/location/5
</code></pre></div>
<p>ค้นหาข้อมูล <code>location</code> ที่ primary key =  5 โดยใช้ method HEAD และแสดงข้อมูลเฉพาะ header
เทียบได้กับ sql <code>select * from location where id =5</code> แต่จะไม่ได้ถูกนำมาแสดง</p>

<p>เรียกใช้งาน</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">curl -i -H &quot;Accept:application/json&quot; -XHEAD  &quot;http://127.0.0.1/yii2/yii2-Leanning-Source/web/location/5&quot;
</code></pre></div>
<p>Result</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="err">HTTP/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="err">OK</span>
<span class="err">Date:</span> <span class="err">Fri,</span> <span class="mi">13</span> <span class="err">Mar</span> <span class="mi">2015</span> <span class="mi">10</span><span class="err">:</span><span class="mi">15</span><span class="err">:</span><span class="mi">20</span> <span class="err">GMT</span>
<span class="err">Server:</span> <span class="err">Apache/</span><span class="mf">2.4</span><span class="err">.</span><span class="mi">9</span> <span class="err">(Unix)</span> <span class="err">PHP/</span><span class="mf">5.6</span><span class="err">.</span><span class="mi">4</span>
<span class="err">X-Powered-By:</span> <span class="err">PHP/</span><span class="mf">5.6</span><span class="err">.</span><span class="mi">4</span>
<span class="err">Content-Type:</span> <span class="err">application/json;</span> <span class="err">charset=UTF</span><span class="mi">-8</span>
</code></pre></div>
<blockquote>
<p>สำหรับคนที่ไม่ชอบ geek ก็ใช้แบบ Gui ได้ครับเป็น extension ของ Chrome Browser <a href="https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm">ดาวน์โหลด</a> <sup>^</sup> หลายคนอาจจะนึกในใจว่า ทำไมไม่บอกตั้งแต่แรก....! เอ่อผมอยากให้ททุกคน geek ครับ ฮา สวัสดีครับ...</p>
</blockquote>

<p>ดูสิใช้งานง่ายมากเลย ...
<img src="/img/postman.png" alt="postman"></p>
</section>
</article>

<!-- Post navigation -->


<!-- Disqus -->

<div class="comments">
  <div id="disqus_thread"></div>
<script type="text/javascript">
	var disqus_shortname = 'dixonsatit';
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

</div>


    </div>
    <script src="/js/main.js"></script>


<footer class="site-footer">
	<p class="text"><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Yii2 Learning</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://www.dimpled.me" property="cc:attributionName" rel="cc:attributionURL">Satit Seethaphon</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.<br />Based on a work at <a xmlns:dct="http://purl.org/dc/terms/" href="http://dixonsatit.github.io" rel="dct:source">http://dixonsatit.github.io</a><br> Powered by <a href="http://jekyllrb.com">Jekyll</a> with <a href="https://rohanchandra.github.io/project/type/">Type Theme</a>
</p>
</footer>


  </body>
</html>
